# UX Specifikace - BetterHotel Calendar Widget

## üéØ C√≠l komponenty

Vytvo≈ôit embeddable kalend√°≈ôov√Ω widget pro v√Ωbƒõr data p≈ô√≠jezdu a odjezdu ve stylu Booking.com, kter√Ω:
- Poskytuje intuitivn√≠ UX pro v√Ωbƒõr rozsahu pobytu
- Respektuje pravidla dostupnosti z BetterHotel API
- Je plnƒõ p≈ô√≠stupn√Ω a responzivn√≠
- Podporuje lokalizaci

## üóìÔ∏è Funkce kalend√°≈ôe ‚Äì v√Ωbƒõr data p≈ô√≠jezdu a odjezdu

### **Z√°kladn√≠ princip**

Kalend√°≈ô umo≈æ≈àuje u≈æivateli vybrat **rozsah pobytu** ‚Äì tedy **datum p≈ô√≠jezdu** (*check-in*) a **datum odjezdu** (*check-out*).
V√Ωbƒõr prob√≠h√° interaktivnƒõ v jednom kalend√°≈ôov√©m widgetu zobrazen√©m nad vstupn√≠m polem.

---

### **Pr≈Øbƒõh v√Ωbƒõru**

#### 1. **Prvn√≠ klik ‚Äì v√Ωbƒõr data p≈ô√≠jezdu**

* Po kliknut√≠ do pole pro v√Ωbƒõr term√≠nu se otev≈ôe kalend√°≈ô se dvƒõma mƒõs√≠ci vedle sebe (desktop) nebo jedn√≠m (mobil).
* U≈æivatel klikne na po≈æadovan√© datum p≈ô√≠jezdu.
* Toto datum se zv√Ωrazn√≠ (nap≈ô. modr√Ωm kruhem nebo zv√Ωraznƒõn√Ωm pozad√≠m).
* V tu chv√≠li se automaticky aktivuje re≈æim **v√Ωbƒõru data odjezdu**.

#### 2. **Hover efekt ‚Äì n√°hled rozptylu**

* P≈ôi najet√≠ kurzorem na jin√© datum (p≈ôed potvrzen√≠m odjezdu) se zv√Ωrazn√≠ **rozptyl dn≈Ø** mezi vybran√Ωm datem p≈ô√≠jezdu a aktu√°ln√≠m datem pod kurzorem.
* Tento rozptyl m√° obvykle **svƒõtlej≈°√≠ barvu pozad√≠** nebo p≈ôechodov√Ω gradient, kter√Ω vizu√°lnƒõ naznaƒçuje d√©lku pobytu.
* Na mobilu se rozptyl zobrazuje p≈ôi tapnut√≠ a≈æ po druh√©m v√Ωbƒõru, ne p≈ôi hoveru.

#### 3. **Druh√Ω klik ‚Äì v√Ωbƒõr data odjezdu**

* Po kliknut√≠ na druh√© datum se rozptyl **potvrd√≠**.
* Dny mezi p≈ô√≠jezdem a odjezdem se **trvale zv√Ωrazn√≠** ‚Äì obvykle p√°skem nebo spojen√Ωm pozad√≠m.
* Datum odjezdu se rovnƒõ≈æ vizu√°lnƒõ zv√Ωrazn√≠ (nap≈ô. stejn√Ω styl jako p≈ô√≠jezd, ale s jin√Ωm odst√≠nem).

#### 4. **Z√°pis do pol√≠**

* Po potvrzen√≠ druh√©ho data se kalend√°≈ô automaticky zav≈ôe.
* Do pol√≠ƒçek se vypln√≠ vybran√° data ve form√°tu nap≈ô. `12. 10. 2025 ‚Äì 15. 10. 2025`.

---

### **Interakce a chov√°n√≠**

#### ‚ùå **Reset v√Ωbƒõru**

* Pokud u≈æivatel klikne na jin√© datum po dokonƒçen√≠ v√Ωbƒõru, v√Ωbƒõr se resetuje a zaƒçne znovu od p≈ô√≠jezdu.

#### üîí **Nedostupn√© term√≠ny**

* Nedostupn√© dny (nap≈ô. plnƒõ obsazen√©) jsou **neklikateln√©** a vizu√°lnƒõ oznaƒçen√© (nap≈ô. ≈°ed√©, p≈ôe≈°krtnut√© nebo se sn√≠≈æenou opacitou).
* Pokud jsou v rozptylu mezi p≈ô√≠jezdem a odjezdem nedostupn√© dny, rozptyl nelze potvrdit ‚Äì kalend√°≈ô z≈Østane ve stavu v√Ωbƒõru odjezdu.

#### ‚öôÔ∏è **Dal≈°√≠ logika**

* Den odjezdu m≈Ø≈æe b√Ωt stejn√Ω den, kdy nƒõkdo jin√Ω p≈ôij√≠≈æd√≠ ‚Äì tedy **den odjezdu nen√≠ blokovan√Ω jako obsazen√Ω den** (v syst√©mu dostupnosti se kontroluje `close_to_arrival` a `close_to_departure`).
* P≈ôi v√Ωbƒõru rozptylu se respektuj√≠ pravidla dostupnosti (nap≈ô. minim√°ln√≠ poƒçet noc√≠).

---

### **Vizu√°ln√≠ stavov√© prvky**

| Stav                 | Popis                                | P≈ô√≠klad stylu                     |
| -------------------- | ------------------------------------ | --------------------------------- |
| **Defaultn√≠ den**    | Bƒõ≈ænƒõ dostupn√Ω den                   | text tmavƒõ ≈°ed√Ω                   |
| **Hoverovan√Ω den**   | N√°hled rozptylu (p≈ôi v√Ωbƒõru odjezdu) | svƒõtl√© modr√© pozad√≠               |
| **Vybran√Ω p≈ô√≠jezd**  | Aktivn√≠ prvn√≠ datum                  | modr√Ω kruh, tuƒçn√© p√≠smo           |
| **Vybran√Ω odjezd**   | Aktivn√≠ druh√© datum                  | modr√Ω kruh, tuƒçn√© p√≠smo           |
| **Rozptyl mezi dny** | Dny mezi p≈ô√≠jezdem a odjezdem        | svƒõtl√© modr√© pozad√≠               |
| **Nedostupn√Ω den**   | Nen√≠ mo≈æn√© vybrat                    | ≈°ed√Ω, neklikac√≠                   |
| **Dne≈°n√≠ datum**     | Zv√Ωraznƒõn√≠ pro orientaci             | modr√Ω r√°meƒçek                     |

---

### **P≈ô√≠klad chov√°n√≠ (Booking.com-like):**

1. Klikne≈° na 12. ≈ô√≠jna ‚Üí oznaƒç√≠ se jako p≈ô√≠jezd.
2. Najede≈° na 15. ≈ô√≠jna ‚Üí 13. a 14. se zobraz√≠ svƒõtle zv√Ωraznƒõn√©.
3. Klikne≈° na 15. ≈ô√≠jna ‚Üí potvrzeno, rozptyl 12.‚Äì15. ≈ô√≠jna je zv√Ωraznƒõn.
4. Kalend√°≈ô se zav≈ôe a data se prop√≠≈°ou do pol√≠.

---

## üè° V√Ωbƒõr term√≠nu pobytu (Check-in / Check-out)

### **1. Z√°kladn√≠ princip**

Komponenta pro v√Ωbƒõr term√≠nu pobytu umo≈æ≈àuje u≈æivateli jednodu≈°e urƒçit:

* **datum p≈ô√≠jezdu (check-in)**
* **datum odjezdu (check-out)**

Obƒõ hodnoty se vyb√≠raj√≠ v jednom sd√≠len√©m kalend√°≈ôov√©m rozhran√≠.
C√≠lem je minimalizovat poƒçet krok≈Ø, p≈ôedej√≠t chyb√°m a vizu√°lnƒõ jasnƒõ vyznaƒçit aktu√°ln√≠ stav v√Ωbƒõru.

### **2. Logika interakce krok za krokem**

#### **Krok 1 ‚Äì Otev≈ôen√≠ kalend√°≈ôe**

* Kliknut√≠m do pole pro v√Ωbƒõr data (nebo do obou ‚Äì podle implementace) se otev≈ôe kalend√°≈ô.
* Pokud je kalend√°≈ô napojen na API dostupnosti, p≈ôednaƒç√≠t√° si informace o dostupn√Ωch/obsazen√Ωch dnech.
* Zobraz√≠ se obvykle dva mƒõs√≠ce vedle sebe (desktop), jeden mƒõs√≠c (mobil).

#### **Krok 2 ‚Äì V√Ωbƒõr data p≈ô√≠jezdu (Check-in)**

* U≈æivatel klikne na po≈æadovan√© datum p≈ô√≠jezdu.
* Toto datum se zv√Ωrazn√≠ (nap≈ô. pln√° barva pozad√≠ nebo modr√Ω kruh).
* Stav komponenty se p≈ôepne do re≈æimu **v√Ωbƒõru data odjezdu (Check-out)**.
* Pomoc√≠ tooltipu nebo drobn√©ho textu pod kalend√°≈ôem m≈Ø≈æe b√Ωt u≈æivatel naveden:
  *‚ÄûVyberte datum odjezdu".*

#### **Krok 3 ‚Äì N√°hled rozptylu p≈ôi hoveru**

* P≈ôi pohybu my≈°√≠ nad jin√Ωmi daty se zobraz√≠ **n√°hled pobytu** ‚Äì svƒõtle zv√Ωraznƒõn√© dny mezi check-inem a aktu√°ln√≠m dnem pod kurzorem.
* Tento hover efekt pom√°h√° u≈æivateli vizu√°lnƒõ odhadnout d√©lku pobytu.
* Nedostupn√© dny (nap≈ô. obsazen√©) ukonƒç√≠ rozptyl ‚Äì nelze p≈ôes nƒõ p≈ôej√≠t.
* Na mobilu se tento krok p≈ôeskakuje (bez hoveru).

#### **Krok 4 ‚Äì V√Ωbƒõr data odjezdu (Check-out)**

* Druh√Ωm kliknut√≠m u≈æivatel potvrd√≠ datum odjezdu.
* Rozptyl dn≈Ø mezi p≈ô√≠jezdem a odjezdem se **trvale zv√Ωrazn√≠**.
* Obƒõ data se zobraz√≠ jako **aktivn√≠ krajn√≠ body v√Ωbƒõru** ‚Äì nap≈ô. kruhy nebo teƒçky s kontrastn√≠m pozad√≠m.

#### **Krok 5 ‚Äì Automatick√© uzav≈ôen√≠ kalend√°≈ôe**

* Po potvrzen√≠ obou dat se kalend√°≈ô **automaticky zav≈ôe**.
* Vybran√° data se p≈ôenesou do pol√≠ (form√°t nap≈ô. `12.‚Äì15. ≈ô√≠jna 2025`).
* U≈æivatel m≈Ø≈æe v√Ωbƒõr upravit kliknut√≠m na pole ‚Äì v√Ωbƒõr se znovu otev≈ôe a lze ho p≈ôepsat.

### **3. Chov√°n√≠ a stavy**

| Stav                       | Popis                                      | P≈ô√≠klad                                                |
| -------------------------- | ------------------------------------------ | ------------------------------------------------------ |
| **Pr√°zdn√Ω v√Ωbƒõr**          | ≈Ω√°dn√© datum zat√≠m vybr√°no                  | Pole placeholder ‚ÄûVyberte term√≠n"                      |
| **Vybran√Ω check-in**       | Prvn√≠ klik potvrzen, ƒçek√° se na check-out  | Datum zv√Ωraznƒõno, text pod kalend√°≈ôem ‚ÄûVyberte odjezd" |
| **Hover rozptyl**          | Mezi check-inem a kurzorem                 | Svƒõtlej≈°√≠ p√°s mezi dny                                 |
| **Potvrzen√Ω rozptyl**      | Check-in + check-out vybr√°ny               | Dny mezi nimi zv√Ωraznƒõn√©                               |
| **Nedostupn√© dny**         | Nen√≠ mo≈æn√© vybrat                          | ≈†ed√Ω text, kurzor ‚Äûnot-allowed"                        |
| **Minim√°ln√≠ d√©lka pobytu** | Nelze potvrdit krat≈°√≠ rozptyl              | Tooltip nap≈ô. ‚ÄûMinim√°ln√≠ d√©lka pobytu 2 noci"          |
| **Reset v√Ωbƒõru**           | Kliknut√≠ na jin√© datum po dokonƒçen√≠ v√Ωbƒõru | P≈ôedchoz√≠ v√Ωbƒõr se sma≈æe, zaƒç√≠n√° znovu od check-inu    |

### **4. Napojen√≠ na API dostupnosti (voliteln√©)**

* P≈ôi naƒçten√≠ kalend√°≈ôe syst√©m oznaƒç√≠ dny s `availability = false` jako **disabled**.
* Dny oznaƒçen√© `close_to_arrival = true` nebo `close_to_departure = true` omezuj√≠ mo≈æn√© kombinace v√Ωbƒõru.
* V den **odjezdu** m≈Ø≈æe b√Ωt nov√Ω p≈ô√≠jezd jin√©ho hosta ‚Äì kalend√°≈ô proto den odjezdu **nezakr√Ωv√°** jako obsazen√Ω.

### **5. Validace a chybov√© stavy**

* Pokud u≈æivatel vybere odjezd d≈ô√≠ve ne≈æ p≈ô√≠jezd ‚Üí v√Ωbƒõr se resetuje a zaƒçne znovu.
* Pokud mezi daty existuje nedostupn√Ω den ‚Üí zobraz√≠ se hl√°≈°ka nap≈ô.
  *‚ÄûZvolen√Ω rozsah obsahuje nedostupn√© dny."*
* Po v√Ωbƒõru se automaticky spoƒç√≠t√° poƒçet noc√≠ (nap≈ô. `3 noci`) a m≈Ø≈æe se zobrazit pod kalend√°≈ôem nebo v rekapitulaci.

### **6. Vizu√°ln√≠ konzistence (Booking.com inspirace)**

* **Check-in** ‚Üí modr√Ω nebo zv√Ωraznƒõn√Ω kruh
* **Check-out** ‚Üí stejn√Ω styl, jin√Ω odst√≠n nebo ikona ‚Äûodchod"
* **Rozptyl** ‚Üí svƒõtle modr√° v√Ωpl≈à mezi nimi
* **Hover** ‚Üí m√≠rnƒõ tmav≈°√≠ p≈ôechod
* **Disabled dny** ‚Üí ≈°ed√©, neklikac√≠
* **Dne≈°n√≠ den** ‚Üí tenk√Ω r√°meƒçek

### **7. Mikrokopie / textov√© stavy**

| Kontext               | Text                               |
| --------------------- | ---------------------------------- |
| P≈ôed v√Ωbƒõrem          | ‚ÄûVyberte datum p≈ô√≠jezdu a odjezdu" |
| Po v√Ωbƒõru prvn√≠ho dne | ‚ÄûVyberte datum odjezdu"            |
| P≈ôi nevalidn√≠m v√Ωbƒõru | ‚ÄûVybran√Ω term√≠n nen√≠ dostupn√Ω"     |
| Po potvrzen√≠ v√Ωbƒõru   | ‚Äû3 noci, 12.‚Äì15. ≈ô√≠jna 2025"       |

---

## üîÑ Diagram toku interakce (UX Flow)

```mermaid
flowchart TD
    A[U≈æivatel klikne na pole pro v√Ωbƒõr data] --> B[Otev≈ôe se kalend√°≈ô]
    B --> C[Naƒçtou se data dostupnosti z API]
    C --> D[Zobraz√≠ se dva mƒõs√≠ce vedle sebe]
    
    D --> E{U≈æivatel klikne na datum}
    E --> F{Je datum dostupn√©?}
    F -->|Ne| G[Zobraz√≠ se chyba - nedostupn√Ω den]
    F -->|Ano| H{Je to prvn√≠ klik?}
    
    H -->|Ano| I[Vybere se datum p≈ô√≠jezdu - modr√Ω kruh]
    I --> J[Aktivuje se re≈æim v√Ωbƒõru odjezdu]
    J --> K[Zobraz√≠ se text: 'Vyberte datum odjezdu']
    
    H -->|Ne| L{Je odjezd d≈ô√≠ve ne≈æ p≈ô√≠jezd?}
    L -->|Ano| M[Prohod√≠ se data - p≈ô√≠jezd = odjezd]
    L -->|Ne| N[Vybere se datum odjezdu]
    
    M --> O[Validace v√Ωbƒõru]
    N --> O
    
    O --> P{Je rozsah validn√≠?}
    P -->|Ne| Q[Zobraz√≠ se chyba]
    P -->|Ano| R[Rozptyl se zv√Ωrazn√≠ svƒõtle mod≈ôe]
    R --> S[Zobraz√≠ se poƒçet noc√≠]
    S --> T[Kalend√°≈ô se automaticky zav≈ôe]
    T --> U[Data se p≈ôenesou do pol√≠]
    
    Q --> D
    G --> D
    
    %% Hover efekt
    J --> V{U≈æivatel najede my≈°√≠ na jin√© datum}
    V -->|Ano| W[Zobraz√≠ se n√°hled rozptylu]
    W --> X{Konƒç√≠ rozptyl u nedostupn√©ho dne?}
    X -->|Ano| Y[Rozptyl se zastav√≠ u nedostupn√©ho dne]
    X -->|Ne| Z[Rozptyl pokraƒçuje a≈æ k hoverovan√©mu dni]
    Y --> V
    Z --> V
    V -->|Ne| AA[Skryje se n√°hled rozptylu]
    AA --> V
```

### **Stavov√Ω diagram komponenty**

```mermaid
stateDiagram-v2
    [*] --> Pr√°zdn√ΩV√Ωbƒõr: Inicializace
    
    Pr√°zdn√ΩV√Ωbƒõr --> Vybran√ΩCheckIn: Klik na dostupn√Ω den
    Pr√°zdn√ΩV√Ωbƒõr --> Pr√°zdn√ΩV√Ωbƒõr: Klik na nedostupn√Ω den
    
    Vybran√ΩCheckIn --> HoverRozptyl: Hover nad jin√Ωm dnem
    Vybran√ΩCheckIn --> Potvrzen√ΩRozptyl: Klik na dostupn√Ω den
    Vybran√ΩCheckIn --> Pr√°zdn√ΩV√Ωbƒõr: Klik na nedostupn√Ω den
    
    HoverRozptyl --> HoverRozptyl: Hover nad dal≈°√≠m dnem
    HoverRozptyl --> Vybran√ΩCheckIn: Hover mimo kalend√°≈ô
    HoverRozptyl --> Potvrzen√ΩRozptyl: Klik na dostupn√Ω den
    
    Potvrzen√ΩRozptyl --> Pr√°zdn√ΩV√Ωbƒõr: Reset v√Ωbƒõru
    Potvrzen√ΩRozptyl --> [*]: Kalend√°≈ô se zav≈ôe
    
    note right of Vybran√ΩCheckIn
        Modr√Ω kruh pro p≈ô√≠jezd
        Text: "Vyberte datum odjezdu"
    end note
    
    note right of HoverRozptyl
        Svƒõtle modr√© pozad√≠
        Rozptyl a≈æ k nedostupn√©mu dni
    end note
    
    note right of Potvrzen√ΩRozptyl
        Modr√© kruhy pro oba dny
        Svƒõtle modr√Ω rozptyl mezi nimi
        Poƒçet noc√≠ zobrazen
    end note
```

---

## üîß Technick√© po≈æadavky

### **API integrace**
- BetterHotel public API (≈æ√°dn√© tajn√© kl√≠ƒçe)
- Endpointy: `/availability` a `/price`
- Defenzivn√≠ mapov√°n√≠ v≈°ech pol√≠ z API
- Cache s konfigurovateln√Ωm TTL

### **Validace**
- Turn-over pravidlo: check-in kontroluje dostupnost, check-out ne
- Close-to-arrival: start den s `close_to_arrival: true` je zak√°zan√Ω
- Rozsah validace: nelze vybrat rozsah p≈ôes nedostupn√© dny
- Minim√°ln√≠/maxim√°ln√≠ poƒçet noc√≠

### **P≈ô√≠stupnost**
- ARIA labely pro v≈°echny interaktivn√≠ prvky
- Keyboard navigation (≈°ipky, Enter, Space)
- Focus management
- Screen reader podpora

### **Responzivita**
- Desktop: dvoumƒõs√≠ƒçn√≠ zobrazen√≠ vedle sebe
- Mobil: jednomƒõs√≠ƒçn√≠ zobrazen√≠ pod sebou
- Flexibiln√≠ grid layout
- Touch-friendly velikosti tlaƒç√≠tek

### **Lokalizace**
- ƒåesk√° a anglick√° lokalizace
- Form√°tov√°n√≠ dat podle locale
- Form√°tov√°n√≠ cen podle locale
- P≈ôelo≈æiteln√© texty v jednom objektu

---

## üé® Design syst√©m

### **Barevn√© sch√©ma**
```css
/* Z√°kladn√≠ barvy */
--bhc-primary: #3b82f6;      /* Modr√° pro hover a aktivn√≠ stavy */
--bhc-success: #10b981;       /* Zelen√° pro vybran√© dny */
--bhc-danger: #dc2626;        /* ƒåerven√° pro nedostupn√© dny */
--bhc-gray: #6b7280;          /* ≈†ed√° pro neaktivn√≠ dny */
--bhc-text: #374151;          /* Tmavƒõ ≈°ed√° pro text */
```

### **Typografie**
- Font: System font stack (-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto)
- Velikosti: 12px (weekdays), 13px (days), 14px (base), 16px (headers)
- V√°hy: 400 (normal), 500 (medium), 600 (semibold), 700 (bold)

### **Spacing**
- Padding: 12px (container), 8px (days), 16px (headers)
- Gap: 1px (grid), 15px (months), 8px (buttons)
- Border radius: 4px (days), 8px (container)

---

## üì± Responzivn√≠ breakpointy

```css
/* Desktop */
@media (min-width: 769px) {
  .bhc-month-grid { flex-direction: row; }
}

/* Tablet */
@media (max-width: 768px) {
  .bhc-month-grid { flex-direction: column; }
}

/* Mobil */
@media (max-width: 480px) {
  .bhc-widget { max-width: 100%; border-radius: 0; }
  .bhc-controls { flex-direction: column; }
}
```

---

## üß™ Testovac√≠ sc√©n√°≈ôe

### **Z√°kladn√≠ funkƒçnost**
1. V√Ωbƒõr rozsahu p≈ôes hranici mƒõs√≠ce
2. Start na dni s `close_to_arrival: true` ‚Üí chyba
3. Quote API sel≈æe ‚Üí fallback na sum_nightly
4. Pobyt 1 noc (minNights=1) i del≈°√≠
5. Lokalizace ceny (CZK / EUR)

### **Edge cases**
1. V√Ωbƒõr rozsahu p≈ôes nedostupn√© dny
2. Hover efekt konƒç√≠ u nedostupn√©ho dne
3. Reset v√Ωbƒõru p≈ôi kliknut√≠ na nov√© datum
4. Keyboard navigation
5. Screen reader kompatibilita

### **Performance**
1. Cache dostupnosti funguje spr√°vnƒõ
2. API vol√°n√≠ jsou optimalizovan√°
3. Renderov√°n√≠ je plynul√©
4. Memory leaks neexistuj√≠

---

## üìã Checklist implementace

- [x] Dvoumƒõs√≠ƒçn√≠ zobrazen√≠
- [x] Hover efekt pouze po check-in
- [x] Automatick√© zastaven√≠ u nedostupn√Ωch dn≈Ø
- [x] Validace rozsahu
- [x] Turn-over pravidlo
- [x] Reset v√Ωbƒõru
- [x] Vizu√°ln√≠ stavy
- [x] Responzivn√≠ design
- [x] P≈ô√≠stupnost
- [x] Lokalizace
- [x] API integrace
- [x] Cache
- [x] Error handling
- [x] Dark mode
- [x] UTC ƒçasov√© z√≥ny
